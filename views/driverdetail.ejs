<!doctype html>
<html>
<head>
  <% include partials/head %>
  <link rel="stylesheet" href="/css/home.css">
  <link rel="stylesheet" href="/css/tbl.css">
</head>
<body>

<div class="iefix">
    <nav class="nav-custom">
        <div class="nav-custom-header col-xs-1 col-sm-3">
            <a href="/" class="click-header">
                <img class="nav-custom-logo" src="/assets/icon.svg"></img>
                <h1>ADMIN</h1>
            </a>
        </div>
        <div class="nav-custom-collapse col-sm-6" id="myNavbar">
            <ul class="nav-custom-ul col-xs-6 col-md-12 mx-auto">
                <li id="home">
                    <img class="nav-custom-icon-main" src="/assets/icon-home-un.svg"></img>
                    <a href="/">HOME</a>
                    <div class="nav-hr" style="display:none;"></div>
                </li>
                <li id="events">
                    <img class="nav-custom-icon-main" src="/assets/icon-my-profile-un.svg"></img>
                    <a href="/<%=router%>"><%=menuitem%></a>
                    <div class="nav-hr" style="display:none;"></div>
                </li>
                <li id="alerts">
                    <img class="nav-custom-icon-main" src="/assets/emergencyalerts.svg"></img>
                    <a href="/alerts">EMERGENCY ALERTS</a>
                    <div class="nav-hr" style="display:none;"></div>
                </li>
            </ul>
            <ul class="nav-custom-ul nav-add-icons-mobile show-mobile">
                <li id="profile">
                    <img class="nav-custom-icon-main" src="/assets/icon-my-profile-un.svg"></img>
                    <a href="/profile"></a>
                </li>
                <li>
                    <img class="nav-custom-icon-main" src="/assets/icon-my-notifications.svg"></img>
                </li>
            </ul>
        </div>
        <div class="col-sm-3 hide-mobile">
            <div class="col-6 dropdown">
                <select id="admin-select" class="dropdown-toggle" onChange="window.location.href=this.value" name="state" required>
                    <option value="" selected="selected" hidden="hidden"><%= picker %></option>
                    <option value="/adminhome/driver">DRIVER</option>
                    <option value="/adminhome/processor">PROCESSOR</option>
                    <option value="/adminhome/sales">SALES</option>
                </select>
            </div>
            <div class="col-6">
                <a href="/notifications"><img class="nav-custom-icon" src="/assets/icon-my-notifications.svg"></img></a>
                <a href="/profile"><img class="nav-custom-icon" style="margin-right:25px;" src="/assets/icon-my-profile-un.svg"></img></a>
            </div>
        </div>
    </nav>

</div>

  <div id="add-trouble-popup" class="popup-panel" style="display:none;">
  	<div class="card-popup">
      <img class="tr" src="/assets/tr-corner.svg"></img>
      <img class="tl" src="/assets/tl-corner.svg"></img>
      <img class="bl" src="/assets/bl-corner.svg"></img>
      <img class="br" src="/assets/br-corner.svg"></img>

  		<div class="popup-header">ADD TROUBLE AREA</div>
    		<img class="close" src="/assets/icon-close-copy-3.svg" onclick="closepopup()">
    		<hr class="popup-hr">
        <p class="popup-desc">Please tell us where the trouble area is within the state and a brief description about the issue.</p>
        <form action="/submitNewTrouble" method="post">
            <div class="form-group">
                <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">STATE</p>
                <select id="add-trouble-state-id" class="form-control" placeholder="Enter State..." name="state" required>
                	<option value="AL">Alabama</option>
                	<option value="AZ">Arizona</option>
                	<option value="AR">Arkansas</option>
                	<option value="CA">California</option>
                	<option value="CO">Colorado</option>
                	<option value="CT">Connecticut</option>
                	<option value="DE">Delaware</option>
                	<option value="DC">District Of Columbia</option>
                	<option value="FL">Florida</option>
                	<option value="GA">Georgia</option>
                	<option value="ID">Idaho</option>
                	<option value="IL">Illinois</option>
                	<option value="IN">Indiana</option>
                	<option value="IA">Iowa</option>
                	<option value="KS">Kansas</option>
                	<option value="KY">Kentucky</option>
                	<option value="LA">Louisiana</option>
                	<option value="ME">Maine</option>
                	<option value="MD">Maryland</option>
                	<option value="MA">Massachusetts</option>
                	<option value="MI">Michigan</option>
                	<option value="MN">Minnesota</option>
                	<option value="MS">Mississippi</option>
                	<option value="MO">Missouri</option>
                	<option value="MT">Montana</option>
                	<option value="NE">Nebraska</option>
                	<option value="NV">Nevada</option>
                	<option value="NH">New Hampshire</option>
                	<option value="NJ">New Jersey</option>
                	<option value="NM">New Mexico</option>
                	<option value="NY">New York</option>
                	<option value="NC">North Carolina</option>
                	<option value="ND">North Dakota</option>
                	<option value="OH">Ohio</option>
                	<option value="OK">Oklahoma</option>
                	<option value="OR">Oregon</option>
                	<option value="PA">Pennsylvania</option>
                	<option value="RI">Rhode Island</option>
                	<option value="SC">South Carolina</option>
                	<option value="SD">South Dakota</option>
                	<option value="TN">Tennessee</option>
                	<option value="TX">Texas</option>
                	<option value="UT">Utah</option>
                	<option value="VT">Vermont</option>
                	<option value="VA">Virginia</option>
                	<option value="WA">Washington</option>
                	<option value="WV">West Virginia</option>
                	<option value="WI">Wisconsin</option>
                	<option value="WY">Wyoming</option>
                </select>
            </div>
            <div class="form-group">
                <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">COUNTY</p>
                <select id="add-trouble-county-id" class="form-control" name="county" required>
                  <option value="" disabled selected hidden>Enter County...</option>
                </select>
            </div>
            <div class="form-group">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">DESCRIPTION</p>
              <textarea id="add-trouble-desc" name="description" placeholder="Enter brief description..." required></textarea>
            </div>

            <button type="submit" class="submit-btn" onclick="submitNewTrouble()">SUBMIT</button>

            <div class="cancel-btn" onclick="closepopup()">CANCEL</div>
        </form>
  	</div>
  </div>

  <% include partials/map-counties %>

  <div id="logout-verify-popup" class="popup-panel" style="display:none;">
      <div class="card-popup">
          <img class="tr" src="/assets/tr-corner.svg"></img>
          <img class="tl" src="/assets/tl-corner.svg"></img>
          <img class="bl" src="/assets/bl-corner.svg"></img>
          <img class="br" src="/assets/br-corner.svg"></img>

          <div class="popup-header">DELETE ACCOUNT</div>
          <img class="close" src="/assets/icon-close-copy-3.svg" onclick="closepopup()">
          <hr class="popup-hr">
          <p class="popup-desc">Are you sure you want to delete this account? This action can't be undone.</p>

          <form action="/deleteuser/<%=email%>" method="get">
              <button type="submit" class="submit-btn">YES, I'M SURE</button>
          </form>

          <div class="cancel-btn" onclick="closepopup()">NO, I CHANGED MY MIND</div>

      </div>
  </div>

  <div class="container-main">

      <div class="card col-12">

          <img class="tr" src="/assets/tr-corner.svg"></img>
          <img class="tl" src="/assets/tl-corner.svg"></img>
          <img class="bl" src="/assets/bl-corner.svg"></img>
          <img class="br" src="/assets/br-corner.svg"></img>

          <div class="detail-header-driver">
            <img src="/assets/icon-close-copy.svg" onclick="window.location.href = '/drivers'"></img>
            <h1><%= name.toUpperCase() %></h1>

            <div class="make-admin">
              <p class="lnk-inline"><a class="alt-link ml-0" href="/makeadmin/<%=email%>">MAKE ADMIN</a></p>
              <p class="lnk-inline" style="text-align:right;"><a class="alt-link ml-0" onclick="verify('#logout-verify-popup')">DELETE USER</a></p>
            </div>
          </div>

          <form method="post" style="display:inline-flex;">
              <div class="form-group col-3" style="padding-right:20px;">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">E-MAIL ADDRESS</p>
                  <input id="email-input" type="text" class="form-control" placeholder="Enter Your Email..." name="email" value="<%= email %>" readonly>
              </div>
              <div class="form-group split-top col-3" style="padding-right:20px;">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">FIRST NAME</p>
                  <input type="text" class="form-control" placeholder="First Name..." name="first" value="<%= firstname %>" required>
              </div>
              <div class="form-group split-btm col-3" style="padding-right:20px;">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">LAST NAME</p>
                  <input type="text" class="form-control" placeholder="Last Name..." name="last" value="<%= lastname %>" required>
              </div>
              <div class="form-group split-btm col-3">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">STATE</p>
                  <select id="driver-edit-state-id" class="form-control" placeholder="Enter State..." name="state" required>
                  	<option value="AL">Alabama</option>
                  	<option value="AZ">Arizona</option>
                  	<option value="AR">Arkansas</option>
                  	<option value="CA">California</option>
                  	<option value="CO">Colorado</option>
                  	<option value="CT">Connecticut</option>
                  	<option value="DE">Delaware</option>
                  	<option value="DC">District Of Columbia</option>
                  	<option value="FL">Florida</option>
                  	<option value="GA">Georgia</option>
                  	<option value="ID">Idaho</option>
                  	<option value="IL">Illinois</option>
                  	<option value="IN">Indiana</option>
                  	<option value="IA">Iowa</option>
                  	<option value="KS">Kansas</option>
                  	<option value="KY">Kentucky</option>
                  	<option value="LA">Louisiana</option>
                  	<option value="ME">Maine</option>
                  	<option value="MD">Maryland</option>
                  	<option value="MA">Massachusetts</option>
                  	<option value="MI">Michigan</option>
                  	<option value="MN">Minnesota</option>
                  	<option value="MS">Mississippi</option>
                  	<option value="MO">Missouri</option>
                  	<option value="MT">Montana</option>
                  	<option value="NE">Nebraska</option>
                  	<option value="NV">Nevada</option>
                  	<option value="NH">New Hampshire</option>
                  	<option value="NJ">New Jersey</option>
                  	<option value="NM">New Mexico</option>
                  	<option value="NY">New York</option>
                  	<option value="NC">North Carolina</option>
                  	<option value="ND">North Dakota</option>
                  	<option value="OH">Ohio</option>
                  	<option value="OK">Oklahoma</option>
                  	<option value="OR">Oregon</option>
                  	<option value="PA">Pennsylvania</option>
                  	<option value="RI">Rhode Island</option>
                  	<option value="SC">South Carolina</option>
                  	<option value="SD">South Dakota</option>
                  	<option value="TN">Tennessee</option>
                  	<option value="TX">Texas</option>
                  	<option value="UT">Utah</option>
                  	<option value="VT">Vermont</option>
                  	<option value="VA">Virginia</option>
                  	<option value="WA">Washington</option>
                  	<option value="WV">West Virginia</option>
                  	<option value="WI">Wisconsin</option>
                  	<option value="WY">Wyoming</option>
                  </select>
              </div>

          </form>

      </div>
  </div>

  <div class="container-main">

    <div class="card card-main">
      <img class="tr" src="/assets/tr-corner.svg"></img>
      <img class="tl" src="/assets/tl-corner.svg"></img>
      <img class="bl" src="/assets/bl-corner.svg"></img>
      <img class="br" src="/assets/br-corner.svg"></img>

      <div class="inner-card-block">

        <div class="table-headers">
          <div class="col-md-7 county-label">
            <h1 style="margin-left:8px;">DRIVER EVENTS</h1>
            <% var count = 0; %>
            <% for (var i = 0; i < event.length; i++) { %>
              <% if (event[i].isnew) { %>
                <% count ++ %>
              <% } %>
            <% } %>
            <% if (count > 0) { %>
              <h2>(<%= count %> NEW)
              </h2>
            <% } %>
          </div>
        </div>

        <table class="table">
          <thead>
            <tr>
              <th>DESCRIPTION</th>
              <th>STATE</th>
              <th>COUNTY</th>
              <th>DATE</th>
              <th>TIME</th>
              <th>STATUS</th>
            </tr>
          </thead>
          <colgroup>
                  <col class="col-md-6">
                  <col class="col-md-1">
                  <col class="col-md-2">
                  <col class="col-md-1">
                  <col class="col-md-1">
                  <col class="col-md-1">
              </colgroup>
          <tbody>
            <% for (var i = 0; i < event.length; i++) { %>
              <tr>
                <td class="expand">
                  <% if (event[i].isnew) { %>
                    <div class="new"><img src="/assets/new.svg"></img></div>
                  <% } %>
                      <a class="alt-link ml-0" onclick="getEventDetails('<%= event[i].id %>', '<%= picker %>')"><%= event[i].description %></a>
                </td>
                <td><%= event[i].state %> </td>
                <td><%= event[i].county %> </td>
                <td><%= event[i].created %> </td>
                <td><%= event[i].ctime %> </td>
                <% if (event[i].manage.toUpperCase() == 'ACCEPTED') { %>
                  <td><div class="tbl-audit-green"><%= event[i].manage %></div></td>
                <% } else if (event[i].manage.toUpperCase() == 'PENDING') { %>
                  <td><div class="tbl-audit-yellow"><%= event[i].manage %></div></td>
                <% } else { %>
                  <td><div class="tbl-audit-red"><%= event[i].manage %></div></td>
                <% }; %>
              </tr>
            <% }; %>
          </tbody>
        </table>
        <% if (event.length <= 0) { %>
          <div class="no-data">We are sorry, we are not able to help in this area.</div>
        <% }; %>
      </div>
    </div>
  </div>

  <div id="cover" style="display:none;"></div>

<div id="click-event" class="popup-panel" style="display:none;">
    <div class="card-popup">
        <img class="tr" src="/assets/tr-corner.svg"></im g>
        <img class="tl" src="/assets/tl-corner.svg"></img>
        <img class="bl" src="/assets/bl-corner.svg"></img>
        <img class="br" src="/assets/br-corner.svg"></img>

        <div class="popup-header">DRIVER EVENT</div>
        <img class="close" src="/assets/icon-close-copy-3.svg" onclick="closepopup()">
        <hr class="popup-hr">
        <div class="form-group">
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">COUNTY</p>
            <p type="text" name="number" id="number" style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">
                <input type="text" name="county" id="county">
        </div>
        <div class="form-group" style="padding-right:20px;">
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">DATE</p>
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">
                <input type="text" name="date" id="date">
        </div>
        <div class="form-group">
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">TIME</p>
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">
                <input type="text" name="time" id="time">
        </div>
        <div class="form-group">
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">DESCRIPTION</p>
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">
                <input type="text" name="desc" id="desc">
        </div>
        <div class="form-group">
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">UPLOADED BY</p>
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">
                <input type="text" name="upl" id="upl">
        </div>
        <div id="pending1" class="cancel-btn" ><a id="acceptevent" class="alt-link ml-0" onclick="closepopup2()">ACCEPT EVENT</a></div>
        <div id="pending2" class="cancel-btn" ><a id="rejectevent" class="alt-link ml-0" onclick="closepopup2()">REJECT EVENT</a></div>
        <div id="accepted" class="cancel-btn"><a class="alt-link ml-0" onclick="getedit()">EDIT EVENT</a></div>
        <button type="submit" class="submit-btn" onclick="deleteevent()">DELETE EVENT</button>


    </div>
</div>

<div id="edit-event" class="popup-panel" style="display:none;">
    <div class="popup-header">DRIVER EVENT</div>
    <img class="close" src="/assets/icon-close-copy-3.svg" onclick="closepopup()">
    <hr class="popup-hr">
    <form id="edit" method="post">
        <div class="form-group">
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">COUNTY</p>
            <p type="text" name="number" id="number2" style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">
                <input type="text" name="county" id="county2">
        </div>
        <div class="form-group" style="padding-right:20px;">
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">STATE</p>
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">
                <input type="text" name="state" id="state2">
        </div>
        <div class="form-group">
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">DESCRIPTION</p>
            <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">
                <input type="text" name="desc" id="desc2">
        </div>
        <button type="submit" class="submit-btn">EDIT</button>
        <div class="cancel-btn" onclick="closepopup()">CANCEL</div>
    </form>
</div>

</body>
<% include partials/script %>
<script src="/js/map-counties.js"></script>
<script src="/js/county-tbl.js"></script>
<script>
$("#driver-edit-state-id").val("<%= state %>");
</script>
</html>
