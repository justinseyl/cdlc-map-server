<!doctype html>
<html>
<head>
  <% include partials/head %>
  <link rel="stylesheet" href="/css/home.css">
  <link rel="stylesheet" href="/css/tbl.css">
</head>
<body>

  <% include partials/processormenu.ejs %>

  <div id="add-trouble-popup" class="popup-panel" style="display:none;">
      <div class="card-popup">
          <img class="tr" src="/assets/tr-corner.svg"></img>
          <img class="tl" src="/assets/tl-corner.svg"></img>
          <img class="bl" src="/assets/bl-corner.svg"></img>
          <img class="br" src="/assets/br-corner.svg"></img>

          <div class="popup-header">ADD TROUBLE AREA PROCESSOR</div>
          <img class="close" src="/assets/icon-close-copy-3.svg" onclick="closepopup()">
          <hr class="popup-hr">
          <p class="popup-desc">Please tell us where the trouble area is within the state and a brief description about the issue.</p>
          <form action="/submitNewTrouble?db=processor" method="post">
              <div class="form-group">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">STATE</p>
                  <select id="add-trouble-state-id" class="form-control" placeholder="Enter State..." name="state" required>
                      <option value="AL">Alabama</option>
                      <option value="AZ">Arizona</option>
                      <option value="AR">Arkansas</option>
                      <option value="CA">California</option>
                      <option value="CO">Colorado</option>
                      <option value="CT">Connecticut</option>
                      <option value="DE">Delaware</option>
                      <option value="DC">District Of Columbia</option>
                      <option value="FL">Florida</option>
                      <option value="GA">Georgia</option>
                      <option value="ID">Idaho</option>
                      <option value="IL">Illinois</option>
                      <option value="IN">Indiana</option>
                      <option value="IA">Iowa</option>
                      <option value="KS">Kansas</option>
                      <option value="KY">Kentucky</option>
                      <option value="LA">Louisiana</option>
                      <option value="ME">Maine</option>
                      <option value="MD">Maryland</option>
                      <option value="MA">Massachusetts</option>
                      <option value="MI">Michigan</option>
                      <option value="MN">Minnesota</option>
                      <option value="MS">Mississippi</option>
                      <option value="MO">Missouri</option>
                      <option value="MT">Montana</option>
                      <option value="NE">Nebraska</option>
                      <option value="NV">Nevada</option>
                      <option value="NH">New Hampshire</option>
                      <option value="NJ">New Jersey</option>
                      <option value="NM">New Mexico</option>
                      <option value="NY">New York</option>
                      <option value="NC">North Carolina</option>
                      <option value="ND">North Dakota</option>
                      <option value="OH">Ohio</option>
                      <option value="OK">Oklahoma</option>
                      <option value="OR">Oregon</option>
                      <option value="PA">Pennsylvania</option>
                      <option value="RI">Rhode Island</option>
                      <option value="SC">South Carolina</option>
                      <option value="SD">South Dakota</option>
                      <option value="TN">Tennessee</option>
                      <option value="TX">Texas</option>
                      <option value="UT">Utah</option>
                      <option value="VT">Vermont</option>
                      <option value="VA">Virginia</option>
                      <option value="WA">Washington</option>
                      <option value="WV">West Virginia</option>
                      <option value="WI">Wisconsin</option>
                      <option value="WY">Wyoming</option>
                  </select>
              </div>
              <div class="form-group">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">COUNTY</p>
                  <select id="add-trouble-county-id" class="form-control" name="county" required>
                      <option value="" disabled selected hidden>Enter County...</option>
                  </select>
              </div>
              <div class="form-group">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY FEE</p>
                  <textarea id="add-trouble-desc" name="fee" placeholder="Enter fee..." required></textarea>
              </div>
              <div class="form-group">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY NAME</p>
                  <textarea id="add-trouble-desc" name="attorneyname" placeholder="Enter name..." required></textarea>
              </div>
              <div class="form-group">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY ADDRESS</p>
                  <textarea id="add-trouble-desc" name="address" placeholder="Enter address..." required></textarea>
              </div>
              <div class="form-group">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY FAX</p>
                  <textarea id="add-trouble-desc" name="fax" placeholder="Enter fax..." required></textarea>
              </div>
              <div class="form-group">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY EMAIL</p>
                  <textarea id="add-trouble-desc" name="email" placeholder="Enter email..." required></textarea>
              </div>
              <div class="form-group">
                  <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY NOTES</p>
                  <textarea id="add-trouble-desc" name="description" placeholder="Enter notes..." required></textarea>
              </div>

              <button type="submit" class="submit-btn" onclick="submitNewTrouble()">SUBMIT</button>

              <div class="cancel-btn" onclick="closepopup()">CANCEL</div>
          </form>
      </div>
  </div>

  <% include partials/map-counties %>

  <div class="container-main">

    <div class="card card-main">
      <img class="tr" src="/assets/tr-corner.svg"></img>
      <img class="tl" src="/assets/tl-corner.svg"></img>
      <img class="bl" src="/assets/bl-corner.svg"></img>
      <img class="br" src="/assets/br-corner.svg"></img>

      <div class="inner-card-block">

        <div class="table-headers">
          <div class="col-md-3 county-label" onclick="window.location.href = '/'">
            <img src="/assets/icon-close-copy.svg"></img>
            <h1 id="county-label-id"></h1>
            <% var count = 0; %>
            <% for (var i = 0; i < formdata.length; i++) { %>
              <% if (formdata[i].isnew) { %>
                <% count ++ %>
              <% } %>
            <% } %>
            <% if (count > 0) { %>
              <h2>(<%= count %> NEW)
              </h2>
            <% } %>
          </div>
            <div class="col-md-3">
                <select id="new" class="dropdown-toggle2" onclick="searchnew()" placeholder="All" name="new" required>
                    <option value="all">All</option>
                    <option value="new">New</option>
                </select>
            </div>
            <div class="col-md-3">
                <select id="stateinput" class="dropdown-toggle2" onclick="searchstate2()" placeholder="Filter by state" name="state" required>
                    <option value="AL">Alabama</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="DC">District Of Columbia</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                </select>
            </div>
            <div class="col-md-3">
                <select id="countyinput" class="dropdown-toggle2" onclick="searchcounty()" name="county" required>
                    <option value="" disabled selected hidden>Filter by County</option>
                </select>
            </div>
            <div class="col-md-14">
                <div id="popTroubleTbl" class="custom-buttons-tbl">ADD TROUBLE AREA</div>
            </div>
        </div>

        <table id="myTable" class="table">
          <thead>
            <tr>
              <th>DESCRIPTION</th>
              <th>STATE</th>
              <th>COUNTY</th>
              <th>DATE</th>
              <th>TIME</th>
            </tr>
          </thead>
          <colgroup>
                  <col class="col-md-8">
                  <col class="col-md-1">
                  <col class="col-md-1">
                  <col class="col-md-1">
                  <col class="col-md-1">
              </colgroup>
          <tbody>
            <% for (var i = 0; i < formdata.length; i++) { %>
              <tr onclick="getEventDetails('<%= formdata[i].id %>', 'processor')">
                <td class="expand">
                  <% if (formdata[i].isnew) { %>
                    <div class="new"><img src="/assets/new.svg"></img></div>
                  <% } %>
                     <%= formdata[i].description %>
                </td>
                <td><%= formdata[i].state %> </td>
                <td><%= formdata[i].county %> </td>
                <td><%= formdata[i].created %> </td>
                <td><%= formdata[i].ctime %> </td>
              </tr>
            <% }; %>
          </tbody>
        </table>
        <% if (formdata.length <= 0) { %>
          <div class="no-data">We are sorry, we are not able to help in this area.</div>
        <% }; %>
      </div>
    </div>
  </div>

  <div id="cover" style="display:none;"></div>

  <div id="click-event" class="popup-panel" style="display:none;">
      <div class="card-popup">
          <img class="tr" src="/assets/tr-corner.svg"></im g>
          <img class="tl" src="/assets/tl-corner.svg"></img>
          <img class="bl" src="/assets/bl-corner.svg"></img>
          <img class="br" src="/assets/br-corner.svg"></img>

          <div class="popup-header">TROUBLE AREA</div>
          <img class="close" src="/assets/icon-close-copy-3.svg" onclick="closepopup()">
          <hr class="popup-hr">
          <div class="form-group col-sm-12 driver-event">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY NAME</p>
              <p name="aname" id="aname"></p>
          </div>
          <div class="form-group col-sm-12 driver-event">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ADDRESS</p>
              <p name="address" id="address"></p>
          </div>
          <div class="form-group col-sm-12 driver-event">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">EMAIL ADDRESS</p>
              <p name="email" id="email"></p>
          </div>
          <div class="form-group col-sm-12 driver-event">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">FAX</p>
              <p name="fax" id="fax"></p>
          </div>
          <div class="form-group col-sm-4 driver-event">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">COUNTY</p>
              <p name="county" id="county3"></p>
          </div>
          <div class="form-group col-sm-4 driver-event">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">STATE</p>
              <p name="state" id="state3"></p>
          </div>
          <div class="form-group col-sm-4 driver-event">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">PRICE</p>
              <p name="price" id="price"></p>
          </div>
          <div class="form-group col-sm-12 driver-event">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">DESCRIPTION</p>
              <p name="desc" id="desc3"></p>
          </div>
          <div class="btn-container-split">
              <div class="btn-item-split col-6">
                  <div id="rejectevent" class="edit-btn reject-btn">REJECT EVENT</div>
              </div>
              <div class="btn-item-split col-6">
                  <div id="acceptevent" class="edit-btn">ACCEPT EVENT</div>
              </div>
          </div>
          <div id="accepted" class="edit-btn"><a onclick="getedit()">EDIT EVENT</a></div>
          <button type="submit" class="nobox-btn" onclick="delevt('processor')">DELETE EVENT</button>


      </div>
  </div>
  <div id="edit-event" class="popup-panel" style="display:none;">
      <div class="popup-header">EDIT <%= picker%> EVENT</div>
      <img class="close" src="/assets/icon-close-copy-3.svg" onclick="closepopup()">
      <hr class="popup-hr">
      <div class="form-group col-sm-12 driver-event">
          <p style="font-size: 14px;color: rgba(255, 255, 255, 0.25);">Please tell us where the event is within the state and a brief description about the issue.</p>
      </div>
      <form id="edit3" method="post">
          <div class="form-group">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">STATE</p>
              <select id="state5" class="form-control" placeholder="Enter State..." name="state" required>
                  <option value="AL">Alabama</option>
                  <option value="AZ">Arizona</option>
                  <option value="AR">Arkansas</option>
                  <option value="CA">California</option>
                  <option value="CO">Colorado</option>
                  <option value="CT">Connecticut</option>
                  <option value="DE">Delaware</option>
                  <option value="DC">District Of Columbia</option>
                  <option value="FL">Florida</option>
                  <option value="GA">Georgia</option>
                  <option value="ID">Idaho</option>
                  <option value="IL">Illinois</option>
                  <option value="IN">Indiana</option>
                  <option value="IA">Iowa</option>
                  <option value="KS">Kansas</option>
                  <option value="KY">Kentucky</option>
                  <option value="LA">Louisiana</option>
                  <option value="ME">Maine</option>
                  <option value="MD">Maryland</option>
                  <option value="MA">Massachusetts</option>
                  <option value="MI">Michigan</option>
                  <option value="MN">Minnesota</option>
                  <option value="MS">Mississippi</option>
                  <option value="MO">Missouri</option>
                  <option value="MT">Montana</option>
                  <option value="NE">Nebraska</option>
                  <option value="NV">Nevada</option>
                  <option value="NH">New Hampshire</option>
                  <option value="NJ">New Jersey</option>
                  <option value="NM">New Mexico</option>
                  <option value="NY">New York</option>
                  <option value="NC">North Carolina</option>
                  <option value="ND">North Dakota</option>
                  <option value="OH">Ohio</option>
                  <option value="OK">Oklahoma</option>
                  <option value="OR">Oregon</option>
                  <option value="PA">Pennsylvania</option>
                  <option value="RI">Rhode Island</option>
                  <option value="SC">South Carolina</option>
                  <option value="SD">South Dakota</option>
                  <option value="TN">Tennessee</option>
                  <option value="TX">Texas</option>
                  <option value="UT">Utah</option>
                  <option value="VT">Vermont</option>
                  <option value="VA">Virginia</option>
                  <option value="WA">Washington</option>
                  <option value="WV">West Virginia</option>
                  <option value="WI">Wisconsin</option>
                  <option value="WY">Wyoming</option>
              </select>
          </div>
          <div class="form-group">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">COUNTY</p>
              <select id="county5" class="form-control" name="county" required>
                  <option value="" disabled selected hidden>Enter County...</option>
              </select>
          </div>

          <div class="form-group">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY FEE</p>
              <textarea id="fee2" name="fee" placeholder="Enter fee..." required></textarea>
          </div>
          <div class="form-group">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY NAME</p>
              <textarea id="aname2" name="aname" placeholder="Enter name..." required></textarea>
          </div>
          <div class="form-group">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY ADDRESS</p>
              <textarea id="address2" name="address" placeholder="Enter address..." required></textarea>
          </div>
          <div class="form-group">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY FAX</p>
              <textarea id="fax2" name="fax" placeholder="Enter fax..." required></textarea>
          </div>
          <div class="form-group">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY EMAIL</p>
              <textarea id="email2" name="email" placeholder="Enter email..." required></textarea>
          </div>
          <div class="form-group">
              <p style="font-size: 12px;color: rgba(255, 255, 255, 0.25);">ATTORNEY NOTES</p>
              <textarea id="desc2" name="description" placeholder="Enter notes..." required></textarea>
          </div>
          <input type="hidden" id="id" name="id" value="">
          <button type="submit" class="submit-btn" eventid>SAVE CHANGES</button>

          <div class="cancel-btn" onclick="closepopup()">CANCEL</div>
      </form>
  </div>

</body>
<% include partials/script %>
<script src="/js/map-counties.js"></script>
<script src="/js/county-tbl.js"></script>
</html>
